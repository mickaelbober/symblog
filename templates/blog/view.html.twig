{% extends 'base.html.twig' %}

{% block title %} {{ parent() }} : {{ article.title }} {% endblock %}

{% block body %}

<div class="container view my-3">
    <h2 class="my-0">{{ article.title }}</h2>
    <div class="metadata">
        <i class="fas fa-calendar-alt"></i> {{ article.createdAt | date('d/m/Y à H:i') }}
        <i class="fas fa-cog"></i> {{ article.category.title }}
        <i class="fas fa-user-circle"></i> {{ article.user.username }}
    </div>
    <hr/>
    <img src="{{ article.image }}" class="img-fluid mb-3" alt="">
    <div class="content">
        {{ article.content | raw }}
    </div>
</div>
<div class="container comments my-3">
    <h4>8 commentaires ...</h4>
    <div class="bg-light rounded m-3 p-3">
        <div class="row">
            <div class="col-avatar">
                <img src="http://lorempixel.com/80/80/city/" class="img-fluid rounded mt-1" alt="">
            </div>
            <div class="col-md">
                <h5>Lorem ipsum le 10/05/2018 à 19:30</h5>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus adipisci, atque beatae distinctio
                exercitationem expedita fugit harum, incidunt ipsum libero odit quis rerum sapiente voluptates?
            </div>
        </div>
    </div>
    <div class="bg-light rounded m-3 p-3">
        <div class="row">
            <div class="col-avatar">
                <img src="http://lorempixel.com/80/80/animals/" class="img-fluid rounded mt-1" alt="">
            </div>
            <div class="col-md">
                <h5>Lorem ipsum le 10/05/2018 à 19:30</h5>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab aliquam asperiores assumenda consequatur
                corporis cupiditate deleniti est fugiat incidunt labore natus, neque pariatur repellat sapiente tempora
                veniam voluptas. Aspernatur deserunt dolore et ipsa iure maxime obcaecati odit officiis sed tempore.
            </div>
        </div>
    </div>
    <div class="bg-light rounded m-3 p-3">
        <div class="row">
            <div class="col-avatar">
                <img src="http://lorempixel.com/80/80/sports/" class="img-fluid rounded mt-1" alt="">
            </div>
            <div class="col-md">
                <h5>Lorem ipsum le 10/05/2018 à 19:30</h5>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Architecto, molestiae molestias neque
                repudiandae sunt tempore!
            </div>
        </div>
    </div>
    <div class="bg-light rounded m-3 p-3">
        <div class="row">
            <div class="col-avatar">
                <img src="http://lorempixel.com/80/80/fashion/" class="img-fluid rounded mt-1" alt="">
            </div>
            <div class="col-md">
                <h5>Lorem ipsum le 10/05/2018 à 19:30</h5>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur dicta dolorem ducimus eligendi eos
                facere ipsum iure laudantium maxime minima nam neque optio possimus, quo quod sed sit soluta sunt
                tempore ullam veniam voluptas voluptate.
            </div>
        </div>
    </div>
    <div class="bg-light rounded m-3 p-3">
        <div class="row">
            <div class="col-avatar">
                <img src="http://lorempixel.com/80/80/cats/" class="img-fluid rounded mt-1" alt="">
            </div>
            <div class="col-md">
                <h5>Lorem ipsum le 10/05/2018 à 19:30</h5>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium beatae consequuntur cum deleniti
                dignissimos dolore ea eaque eius excepturi expedita facilis hic in ipsam itaque minus nam nemo neque
                nulla numquam obcaecati odio officia, porro sequi vel velit! Esse, maiores!
            </div>
        </div>
    </div>
    <div class="bg-light rounded m-3 p-3">
        <div class="row">
            <div class="col-avatar">
                <img src="http://lorempixel.com/80/80/transport/" class="img-fluid rounded mt-1" alt="">
            </div>
            <div class="col-md">
                <h5>Lorem ipsum le 10/05/2018 à 19:30</h5>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cum, libero.
            </div>
        </div>
    </div>
    <div class="bg-light rounded m-3 p-3">
        <div class="row">
            <div class="col-avatar">
                <img src="http://lorempixel.com/80/80/nature/" class="img-fluid rounded mt-1" alt="">
            </div>
            <div class="col-md">
                <h5>Lorem ipsum le 10/05/2018 à 19:30</h5>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus atque beatae culpa cupiditate
                delectus doloribus dolorum eaque et ex excepturi hic incidunt inventore itaque, minima numquam odit
                optio quaerat qui quisquam reprehenderit saepe sequi soluta tenetur ut velit vero voluptatem.
            </div>
        </div>
    </div>
    <div class="bg-light rounded m-3 p-3">
        <div class="row">
            <div class="col-avatar">
                <img src="http://lorempixel.com/80/80/people/" class="img-fluid rounded mt-1" alt="">
            </div>
            <div class="col-md">
                <h5>Lorem ipsum le 10/05/2018 à 19:30</h5>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet beatae debitis dolorum esse laborum ut!
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block javascript %}

<script>

$('#btn-article-edit').on('click', function(event) {
    event.preventDefault();
    url = location.pathname + '/edit';
    $.get(url, function(data) {
        $('#modal-article').remove();
        $('body').append(data);
        $('#modal-article').modal('show');
        $('#form-article').on('submit', function(event) {
            event.preventDefault();
            $.post(url, $(this).serialize(), function(data) {
                if(data != 'OK') {
                    $('#form-article .modal-body').html(data);
                } else {
                    $('#modal-article').modal('hide');
                    location.reload();
                }
            });
        });
    });
});

</script>

{% endblock %}
